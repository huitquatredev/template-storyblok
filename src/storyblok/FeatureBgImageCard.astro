---
import { storyblokEditable } from '@storyblok/astro'
import RichText from './utils/RichText.astro'
const { blok } = Astro.props

let bgImgUrl = new URL('.netlify/images', Astro.site)
bgImgUrl.searchParams.set('url', blok?.image.filename)
---

<section class="container" {...storyblokEditable(blok)} data-aos="fade-left">
  <div
    class="min-h-[35vh] md:min-h-[75vh] bg-center bg-cover bg-no-repeat relative rounded-xl bg-wrapper"
    style={`--bg-image: url(${bgImgUrl})`}>
    <div
      class="absolute bottom-0 start-0 end-0 max-w-xs md:max-w-sm text-center mx-auto p-6 md:start-auto md:text-start md:mx-0">
      <div
        data-aos-delay="300"
        data-aos="fade-left"
        class={`px-5 py-4 inline-block ${blok.cardColor === 'primary' ? 'bg-primary text-primary-content' : blok.cardColor === 'secondary' ? 'bg-secondary text-secondary-content' : blok.cardColor === 'accent' ? 'bg-accent text-accent-content' : 'bg-neutral text-neutral-content'} rounded-lg md:p-7`}>
        <RichText content={blok.content} />
      </div>
    </div>
  </div>
</section>

<style>
  .bg-wrapper {
    background-image: var(--bg-image);
  }
</style>
